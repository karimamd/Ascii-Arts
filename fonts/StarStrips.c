#include <StarStrips.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <ctype.h>
int StarStrips_allowed(int c)
{
	return isupper(c) || c==' ';
}
int StarStrips_index(int c)
{
	return  isupper(c)? c -'A'+1 :0;
}
int StarStrips_init(void)
{
	font_alloc(StarStrips,9,27);
	d_alloc(StarStrips,space,6,' ',ARRAY({
			"     ",
			"     ",
			"     ",
			"     ",
			"     ",
			"     ",
			"     ",
			"     ",
			"     "			}));
	d_alloc(StarStrips,A,'A',14,ARRAY({
			"   ------    ",
			"  ********   ",
			" ----------  ",
			"****    **** ",
			"------------ ",
			"************ ",
			"----    ---- ",
			"****    **** ",
			"             "		}));
	d_alloc(StarStrips,B,'B',14,ARRAY({
			"-----------  ",
			"***********  ",
			"----       - ",
			"***********  ",
			"-----------  ",
			"****       * ",
			"-----------  ",
			"***********  ",
			"             "		}));
	d_alloc(StarStrips,C,'C',14,ARRAY({
			"------------ ",
			"************ ",
			"---          ",
			"***          ",
			"---          ",
			"***          ",
			"------------ ",
			"************ ",
			"             "		}));
	d_alloc(StarStrips,D,'D',14,ARRAY({
			"----------   ",
			"************ ",
			"--        -- ",
			"**        ** ",
			"--        -- ",
			"**        ** ",
			"------------ ",
			"**********   ",
			"             "		}));
	d_alloc(StarStrips,E,'E', 14,ARRAY({
			"------------ ",
			"************ ",         
			"----         ", 
			"************ ", 
			"------------ ",         
			"****         ", 
			"------------ ",
			"************ ",             
			"             "		}));
	d_alloc(StarStrips,F,'F',14,ARRAY({
			"------------ ",
			"************ ",
			"----         ",
			"************ ",
			"------------ ",
			"****         ",
			"----         ",
			"****         ",
			"             "		}));
	d_alloc(StarStrips,G,'G',14,ARRAY({
			"------------ ",
			"************ ",
			"----         ",
			"****  ****** ",
			"----  ------ ",
			"****    **** ",
			"------------ ",
			"************ ",
			"             "		}));
	d_alloc(StarStrips,H,'H',14,ARRAY({
			"----    ---- ",
			"****    **** ",
			"----    ---- ",
			"************ ",
			"------------ ",
			"****    **** ",
			"----    ---- ",
			"****    **** ",
			"             "		}));
	d_alloc(StarStrips,I,'I',11,ARRAY({
			"--------  ",
			"********  ",
			"  ----    ",
			"  ****    ",
			"  ----    ",
			"  ****    ",
			"--------  ",
			"********  ",
			"          "		}));
	d_alloc(StarStrips,J,'J',13,ARRAY({
			"--------    ",
			"********    ",
			"  ---       ",
			"  ***       ",
			"  ---       ",
			"  ***   **  ",
			"  --------  ",
			"  ********  ",
			"            "		}));
	d_alloc(StarStrips,K,'K',14,ARRAY({
			"----    ---- ",
			"****   ****  ",
			"----  ----   ",
			"*********    ",
			"---------    ",
			"****  ****   ",
			"----   ----  ",
			"****    **** ",
			"             "		}));
	d_alloc(StarStrips,L,'L',14,ARRAY({
			"----         ",
			"****         ",
			"----         ",
			"****         ",
			"----         ",
			"************ ",
			"------------ ",
			"************ ",
			"             "		}));
	d_alloc(StarStrips,M,'M', 14,ARRAY({
			"  ********   ",
			" ----------  ",
			"************ ",
			"---  --  --- ",
			"***  **  *** ",
			"---  --  --- ",
			"***  **  *** ",
			"---      --- ",
			"             "		}));
	d_alloc(StarStrips,N,'N',14,ARRAY({
			"----    ---- ",
			"*****   **** ",
			"------  ---- ",
			"************ ",
			"------------ ",
			"****  ****** ",
			"----   ----- ",
			"****    **** ",
			"             "		}));
	d_alloc(StarStrips,O,'O',14,ARRAY({
			"  --------   ",
			" **********  ",
			"----    ---- ",
			"***      *** ",
			"---      --- ",
			"****    **** ",
			" ----------  ",
			"  ********   ",
			"             "		}));
	d_alloc(StarStrips,P,'P',14,ARRAY({
			"-----------  ",
			"************ ",
			"---      --- ",
			"************ ",
			"-----------  ",
			"****         ",
			"----         ",
			"****         ",
			"             "		}));
	d_alloc(StarStrips,Q,'Q',14,ARRAY({
			"  --------   ",
			" **********  ",
			"----    ---- ",
			"***      *** ",
			"---   --  -- ",
			"****   ** ** ",
			" ------ -- - ",
			"  ******* ** ",
			"             "		}));
	d_alloc(StarStrips,R,'R',14,ARRAY({
			"-----------  ",
			"***********  ",
			"----    ---  ",
			"*********    ",
			"---------    ",
			"****  ****   ",
			"----   ----  ",
			"****    **** ",
			"             "		}));
	d_alloc(StarStrips,S,'S',14,ARRAY({
			"------------ ",
			"************ ",
			"----         ",
			"************ ",
			"------------ ",
			"       ***** ",
			"------------ ",
			"************ ",
			"             "}));
	d_alloc(StarStrips,T,'T',14,ARRAY({
			"------------ ",
			"************ ",
			"------------ ",
			"    ****     ",
			"    ----     ",
			"    ****     ",
			"    ----     ",
			"    ****     ",
			"             "		}));
	d_alloc(StarStrips,U,'U',14,ARRAY({
			"----    ---- ",
			"****    **** ",
			"----    ---- ",
			"****    **** ",
			"----    ---- ",
			"************ ",
			"------------ ",
			"************ ",
			"             "		}));
	d_alloc(StarStrips,V,'V',13,ARRAY({
			"---    ---  ",
			"***    ***  ",
			"---    ---  ",
			"***    ***  ",
			"---    ---  ",
			" ********   ",
			"  ------    ",
			"   ****     ",
			"            "}));
	d_alloc(StarStrips,W,'W',14,ARRAY({
			"---      --- ",
			"***  **  *** ",
			"---  --  --- ",
			"***  **  *** ",
			"---  --  --- ",
			"************ ",
			" ----------  ",
			"  ********   ",
			"             "		}));
	d_alloc(StarStrips,X,'X',14,ARRAY({
			"---      --- ",
			" ***    ***  ",
			"  ---  ---   ",
			"   ******    ",
			"   ------    ",
			"  ***  ***   ",
			" ---    ---  ",
			"***      *** ",
			"             "		}));
	d_alloc(StarStrips,Y,'Y',14,ARRAY({
			"---      --- ",
			" ***    ***  ",
			"  ---  ---   ",
			"   ******    ",
			"    ----     ",
			"    ****     ",
			"    ----     ",
			"    ****     ",
			"             "		}));
	d_alloc(StarStrips,Z,'Z',14,ARRAY({
			"------------ ",
			"************ ",
			"        ---- ",
			"************ ",
			"------------ ",
			"****         ",
			"------------ ",
			"************ ",
			"             "		}));
}
int StarStrips_exit(void)
{
	for(int i=0;i<StarStrips.d_n;i++)
		for(int j=0;j<StarStrips.c;j++)
			free(StarStrips.d[i][j]);
	for(int i=0;i<StarStrips.d_n;i++)
		free(StarStrips.d[i]);
	free(StarStrips.d);
	free(StarStrips.r);

}
int StarStrips_print(const char* s)
{

	int n = strlen(s);
	for(int i=0;i<n;i++)
		if(StarStrips.allowed(s[i]) != 1)
			return -1;
	for (int i=0;i<StarStrips.c;i++)
	{
		for(int j=0;j<n;j++)
			fputs(StarStrips.d[StarStrips.index(s[j])][i],stdout);
		putchar('\n');
	}
}
